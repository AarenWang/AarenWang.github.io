<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Goè¯­è¨€é«˜æ€§èƒ½æ—¥å¿—åº“-zapä»‹ç» - Aaron Wangçš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
<script async src="https://www.googletagmanager.com/gtag/js?id=G-90PNLQGFCE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-90PNLQGFCE', { 'anonymize_ip': false });
}
</script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="Aaron Wangçš„åšå®¢" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/ring.webp">
				</div><div class="logo__item logo__text">
					<div class="logo__title">Aaron Wangçš„åšå®¢</div>
					<div class="logo__tagline">è©ææœ¬æ— æ ‘ï¼Œæ˜é•œäº¦éå°ï¼Œæœ¬æ¥æ— ä¸€ç‰©ï¼Œä½•å¤„æƒ¹å°˜åŸƒ</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/posts/about/">
				
				<span class="menu__text">å…³äº</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
	
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Goè¯­è¨€é«˜æ€§èƒ½æ—¥å¿—åº“-zapä»‹ç»</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2023-01-30T20:16:55&#43;08:00">January 30, 2023</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/go/" rel="category">go</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<h2 id="zapä»‹ç»">zapä»‹ç»</h2>
<p>goè¯­è¨€ä½œä¸ºä¸€é—¨è‡ªå¸¦ç”µæ± (Batteries Included)çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ ‡å‡†åº“åŠŸèƒ½éå¸¸çš„å…¨ï¼Œä½†æ˜¯æ ‡å‡†åº“è‡ªå¸¦çš„logåŒ…<a href="https://golang.org/pkg/log/">package</a>ï¼ŒåŠŸèƒ½å¤ªç®€é™‹ï¼Œè¿åŸºæœ¬çš„æ—¥å¿—åˆ†çº§(Log Level)è¾“å‡ºéƒ½æ”¯æŒï¼Œä¹Ÿæ— æ³•è¾“å‡ºç±»ä¼¼jsonè¿™æ ·çš„ç»“æ„åŒ–æ—¥å¿—ï¼Œ
logåŒ…æ— æ³•ä½œä¸ºç”Ÿäº§ç¯å¢ƒæ—¥å¿—è¾“å‡ºæ¥ä½¿ç”¨ã€‚å¯¹äºä¸€ä¸ªéœ€è¦é•¿æœŸè¿è¡Œçš„åç«¯åº”ç”¨æ¥è¯´ï¼Œè®°å½•åº”ç”¨è¿è¡Œè¿‡ç¨‹çš„æ—¥å¿—ï¼Œä¾›åç»­è§‚å¯Ÿå’Œåˆ†æé—®é¢˜å¿…ä¸å¯å°‘ã€‚</p>
<p>äº†è§£goè¯­è¨€ç”Ÿæ€å¯¹æ—¥å¿—çš„æ”¯æŒæƒ…å†µåï¼Œæœ€åæ·±å…¥äº†è§£æ‰“è½¦å…¬å¸uberæ¨å‡ºçš„æ—¥å¿—åº“zap(<a href="https://github.com/uber-go/zap/">github</a>)ï¼Œzapå¼ºè°ƒæ€§èƒ½ï¼Œå®˜æ–¹æ–‡æ¡£ä¸Šè¯´æ¯”å¸‚é¢ä¸Šç±»ä¼¼çš„æ—¥å¿—åº“æ€§è¦å¿«4åˆ°10å€ï¼ŒåŒæ—¶zapä¸ºäº†æ€§èƒ½zap
åšäº†ä¸å°‘çš„å–èˆï¼Œæ¯”å¦‚ä»¥ä¸‹å‡ ç§æƒ…å†µå¯¹æ€§èƒ½å½±å“å¤§ï¼Œzapåº“å°½é‡é¿å…</p>
<ol>
<li>åŸºäºåå°„çš„åºåˆ—åŒ–</li>
<li>å­—ç¬¦ä¸²æ ¼å¼åŒ–</li>
<li>é¿å…ä½¿ç”¨interface {}å¸¦æ¥çš„æ‹†ç®±è£…ç®±å¼€é”€</li>
</ol>
<p>zapä»£ç å®ç°è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘åšåˆ°:</p>
<ul>
<li>æ— åå°„</li>
<li>é›¶åˆ†é…</li>
<li>JSON ç¼–ç å™¨</li>
<li>æ—¥å¿—è®°å½•å™¨Loggerå°½é‡é¿å…åºåˆ—åŒ–å’Œå¯¹è±¡åˆ†é…ä»¥åŠå›æ”¶
ä»zapæ€§èƒ½å¯¹æ¯”<a href="https://github.com/uber-go/zap/#performance">æ–‡æ¡£</a>ä¸Šçœ‹ï¼Œzapæ¯”å…¶å®ƒæ—¥å¿—åº“æ€§èƒ½é«˜å¾ˆå¤šã€‚</li>
</ul>
<h2 id="ä½¿ç”¨è®°å½•">ä½¿ç”¨è®°å½•</h2>
<p>ä¸€ å®‰è£…ä¾èµ–</p>
<pre tabindex="0"><code>go get -u go.uber.org/zap
</code></pre><p>äºŒ ä½¿ç”¨loggeræ‰“å°æ—¥å¿—
zapæä¾›åŸç”Ÿçš„Loggerå’Œå¿«æ·ä½¿ç”¨SugaredLogger,åŸç”ŸLoggeræ€§èƒ½æ›´å¥½ï¼Œä½†æ˜¯ä½¿ç”¨ä½“éªŒä¸ŠSugaredLoggeræ›´æ–¹é¢ï¼Œé™¤éæ˜¯ä¸€äº›æ€§èƒ½éå¸¸å…³é”®çš„åœºæ™¯ï¼Œä¸ç„¶å®˜æ–¹å»ºè®®å¤§éƒ¨åˆ†æƒ…å†µä½¿ç”¨SugaredLogger
å¤§éƒ¨åˆ†åœºæ™¯ æˆ‘ä»¬éƒ½åº”è¯¥ä½¿ç”¨SugaredLogger</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>logger, _ <span style="color:#555">:=</span> zap.<span style="color:#c0f">NewProduction</span>()
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">defer</span> logger.<span style="color:#c0f">Sync</span>() <span style="color:#09f;font-style:italic">// flushes buffer, if any
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>sugar <span style="color:#555">:=</span> logger.<span style="color:#c0f">Sugar</span>()
</span></span><span style="display:flex;"><span>sugar.<span style="color:#c0f">Infow</span>(<span style="color:#c30">&#34;failed to fetch URL&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#09f;font-style:italic">// Structured context as loosely typed key-value pairs.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#c30">&#34;url&#34;</span>, url,
</span></span><span style="display:flex;"><span>  <span style="color:#c30">&#34;attempt&#34;</span>, <span style="color:#f60">3</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#c30">&#34;backoff&#34;</span>, time.Second,
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>sugar.<span style="color:#c0f">Infof</span>(<span style="color:#c30">&#34;Failed to fetch URL: %s&#34;</span>, url)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">func</span> (s <span style="color:#555">*</span>SugaredLogger) <span style="color:#c0f">Infow</span>(msg <span style="color:#078;font-weight:bold">string</span>, keysAndValues <span style="color:#555">...</span><span style="color:#069;font-weight:bold">interface</span>{})
</span></span></code></pre></div><p>Infowç­‰ä»¥wç»“å°¾çš„æ‰“å°æ—¥å¿—å‡½æ•°ï¼Œæ‰“å°æ—¥å¿—msgå’Œï¼Œåç»­å¯é€‰çš„é”®å€¼å¯¹ ä»¥jsonå­—ç¬¦ä¸²æ‰“å°åˆ°æ—¥å¿—é‡Œ</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">func</span> (s <span style="color:#555">*</span>SugaredLogger) <span style="color:#c0f">Infof</span>(template <span style="color:#078;font-weight:bold">string</span>, args <span style="color:#555">...</span><span style="color:#069;font-weight:bold">interface</span>{}) 
</span></span></code></pre></div><p>ä»¥Infofç­‰ä»¥fç»“å°¾æ‰“å°æ—¥å¿—å‡½æ•°ï¼Œç±»ä¼¼printfæ ¼å¼åŒ–å‚æ•°æ‰“å°æ—¥å¿—</p>
<p>ä¸‰ åŸç”ŸLoggerå’ŒSugardLogger
ä¸€äº›éå¸¸æ³¨é‡æ€§èƒ½çš„åœºæ™¯ ä½¿ç”¨åŸç”ŸLoggerï¼Œå®ƒæ¯”SugaredLoggeræ›´å¿«ï¼Œæ›´å°‘çš„å†…å­˜å¯¹è±¡åˆ†é…ï¼Œä½†æ˜¯ä½¿ç”¨æ—¶å¿…é¡»é™å®šæ—¥å¿—è®°å½•é”®å€¼å¯¹valueç±»å‹ï¼Œæ¯”å¦‚String,Intç­‰å„ç§ç±»å‹ï¼Œæ”¯æŒçš„ç±»å‹å®šä¹‰åœ¨<a href="https://github.com/uber-go/zap/blob/master/field.go">zap/field.go</a>é‡Œ,ä¸‹é¢æ˜¯ä½¿ç”¨ä¾‹å­</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>logger, _ <span style="color:#555">:=</span> zap.<span style="color:#c0f">NewProduction</span>()
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">defer</span> logger.<span style="color:#c0f">Sync</span>()
</span></span><span style="display:flex;"><span>logger.<span style="color:#c0f">Info</span>(<span style="color:#c30">&#34;failed to fetch URL&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#09f;font-style:italic">// Structured context as strongly typed Field values.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  zap.<span style="color:#c0f">String</span>(<span style="color:#c30">&#34;url&#34;</span>, url),
</span></span><span style="display:flex;"><span>  zap.<span style="color:#c0f">Int</span>(<span style="color:#c30">&#34;attempt&#34;</span>, <span style="color:#f60">3</span>),
</span></span><span style="display:flex;"><span>  zap.<span style="color:#c0f">Duration</span>(<span style="color:#c30">&#34;backoff&#34;</span>, time.Second),
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>å››  æ—¥å¿—Logger Bufferedç¼“å†²
zapé»˜è®¤è®°å½•æ—¥å¿—ä¸ä½¿ç”¨ç¼“å†²åŒºï¼Œzapä¹Ÿæä¾›åº•å±‚APIï¼Œè®¾ç½®å¯ç”¨ç¼“å†²åŒºï¼Œå¯ç”¨åº”ç”¨é€€å‡ºå‰è®°å¾—è°ƒç”¨Sync()æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">defer</span> logger.<span style="color:#c0f">Sync</span>()
</span></span></code></pre></div><p>äº” SugardLoggerå’ŒLoggerå¯ä»¥æ ¹æ®è‡ªå·±çš„åœºæ™¯ç›¸äº’è½¬æ¢</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>logger <span style="color:#555">:=</span> zap.<span style="color:#c0f">NewExample</span>()
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">defer</span> logger.<span style="color:#c0f">Sync</span>()
</span></span><span style="display:flex;"><span>sugar <span style="color:#555">:=</span> logger.<span style="color:#c0f">Sugar</span>()
</span></span><span style="display:flex;"><span>plain <span style="color:#555">:=</span> sugar.<span style="color:#c0f">Desugar</span>()
</span></span></code></pre></div><p>å…­ zapæ—¥å¿—ä½¿ç”¨é…ç½®
zapæä¾›ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ç”Ÿäº§ç¯å¢ƒé…ç½®å’Œå¼€å‘ç¯å¢ƒé…ç½®</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>logger, err <span style="color:#555">:=</span> zap.<span style="color:#c0f">NewProduction</span>()  <span style="color:#09f;font-style:italic">//ç”Ÿäº§ç¯å¢ƒé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// logger, err := zap.NewDevelopmentConfig()  å¼€å‘é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// logger, err := zap.NewExample()  
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>	<span style="color:#069;font-weight:bold">if</span> err <span style="color:#555">!=</span> <span style="color:#069;font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>		log.<span style="color:#c0f">Fatalf</span>(<span style="color:#c30">&#34;can&#39;t initialize zap logger: %v&#34;</span>, err)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">defer</span> logger.<span style="color:#c0f">Sync</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	logger.<span style="color:#c0f">Info</span>(<span style="color:#c30">&#34;This is a production config log example&#34;</span>, zap.<span style="color:#c0f">String</span>(<span style="color:#c30">&#34;username&#34;</span>, <span style="color:#c30">&#34;JackMa&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>// Production
</span></span><span style="display:flex;"><span>	// {&#34;level&#34;:&#34;info&#34;,&#34;ts&#34;:1674984972.10138,&#34;caller&#34;:&#34;zaplog/zap_test.go:36&#34;,&#34;msg&#34;:&#34;This is a production config log example&#34;,&#34;username&#34;:&#34;JackMa&#34;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	// Development
</span></span><span style="display:flex;"><span>	// 2023-01-29T21:41:03.362+0800	INFO	zaplog/zap_test.go:37	This is a production config log example	{&#34;username&#34;: &#34;JackMa&#34;}
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°</p>
<ul>
<li>Productioné…ç½®ä¸‹æ•´æ¡æ—¥å¿—ä»¥JSONæ ¼å¼è¾“å‡ºï¼Œé™„åŠ çš„æ—¥å¿—å…ƒæ•°æ®å­—æ®µæœ‰level(æ—¥å¿—çº§åˆ«)ï¼Œts(æ—¶é—´æˆ³,UNIXæ ¼å¼)ï¼Œcaller(è¾“å‡ºæ—¥å¿—ä½ç½®)ä¸‰ä¸ª</li>
<li>Developmenté…ç½®ä¸‹ æ—¥å¿—ä»¥æ‰å¹³æ–‡æœ¬æ ¼å¼è¾“å‡ºï¼Œå­—æ®µä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ã€‚</li>
</ul>
<p>ä¸ƒ  zapé…ç½®è¯¦è§£
ä¸Šé¢å±•ç¤ºäº†zapè‡ªå¸¦çš„Productionå’ŒDevelopmentå¼€ç®±å³ç”¨é…ç½®ï¼Œç›´æ¥ä¸Šä»£ç åŠ æ³¨é‡Š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// è°ƒç”¨NewProductionConfig()ç”Ÿæˆè¯¦ç»†é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">func</span> <span style="color:#c0f">NewProduction</span>(options <span style="color:#555">...</span>Option) (<span style="color:#555">*</span>Logger, <span style="color:#078;font-weight:bold">error</span>) {
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">return</span> <span style="color:#c0f">NewProductionConfig</span>().<span style="color:#c0f">Build</span>(options<span style="color:#555">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">func</span> <span style="color:#c0f">NewProductionConfig</span>() Config {
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">return</span> Config{
</span></span><span style="display:flex;"><span>   	Level:       <span style="color:#c0f">NewAtomicLevelAt</span>(InfoLevel),<span style="color:#09f;font-style:italic">//æ‰“å°Infoçº§åˆ«ä»¥ä¸Šæ—¥å¿—
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   	Development: <span style="color:#069;font-weight:bold">false</span>,  
</span></span><span style="display:flex;"><span>   	Sampling: <span style="color:#555">&amp;</span>SamplingConfig{  <span style="color:#09f;font-style:italic">//ç™¾åˆ†ä¹‹ç™¾é‡‡æ ·
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   		Initial:    <span style="color:#f60">100</span>,
</span></span><span style="display:flex;"><span>   		Thereafter: <span style="color:#f60">100</span>,
</span></span><span style="display:flex;"><span>   	},
</span></span><span style="display:flex;"><span>   	Encoding:         <span style="color:#c30">&#34;json&#34;</span>, <span style="color:#09f;font-style:italic">//æ—¥å¿—æ¡ç›®ä»¥jsonæ ¼å¼è¾“å‡º
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   	EncoderConfig:    <span style="color:#c0f">NewProductionEncoderConfig</span>(),<span style="color:#09f;font-style:italic">//é…ç½®è¾“å‡ºå­—æ®µ
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   	OutputPaths:      []<span style="color:#078;font-weight:bold">string</span>{<span style="color:#c30">&#34;stderr&#34;</span>},
</span></span><span style="display:flex;"><span>   	ErrorOutputPaths: []<span style="color:#078;font-weight:bold">string</span>{<span style="color:#c30">&#34;stderr&#34;</span>},
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//æˆ‘ä»¬ä¹Ÿçœ‹ä¸‹DevelopmentConfig
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">func</span> <span style="color:#c0f">NewDevelopmentConfig</span>() Config {
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">return</span> Config{
</span></span><span style="display:flex;"><span>   	Level:            <span style="color:#c0f">NewAtomicLevelAt</span>(DebugLevel),<span style="color:#09f;font-style:italic">//æ‰“å°Debugçº§åˆ«ä»¥ä¸Šæ—¥å¿—
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   	Development:      <span style="color:#069;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>   	Encoding:         <span style="color:#c30">&#34;console&#34;</span>, <span style="color:#09f;font-style:italic">//æ—¥å¿—æ¡ç›®ä»¥æ‰ç‰‡çš„æ–‡æœ¬è¡Œæ ¼å¼è¾“å‡º
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   	EncoderConfig:    <span style="color:#c0f">NewDevelopmentEncoderConfig</span>(), <span style="color:#09f;font-style:italic">//é…ç½®è¾“å‡ºå­—æ®µ
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   	OutputPaths:      []<span style="color:#078;font-weight:bold">string</span>{<span style="color:#c30">&#34;stderr&#34;</span>},
</span></span><span style="display:flex;"><span>   	ErrorOutputPaths: []<span style="color:#078;font-weight:bold">string</span>{<span style="color:#c30">&#34;stderr&#34;</span>},
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//å†çœ‹çœ‹NewExample
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">func</span> <span style="color:#c0f">NewExample</span>(options <span style="color:#555">...</span>Option) <span style="color:#555">*</span>Logger {
</span></span><span style="display:flex;"><span>   encoderCfg <span style="color:#555">:=</span> zapcore.EncoderConfig{
</span></span><span style="display:flex;"><span>   	MessageKey:     <span style="color:#c30">&#34;msg&#34;</span>,
</span></span><span style="display:flex;"><span>   	LevelKey:       <span style="color:#c30">&#34;level&#34;</span>,
</span></span><span style="display:flex;"><span>   	NameKey:        <span style="color:#c30">&#34;logger&#34;</span>,
</span></span><span style="display:flex;"><span>   	EncodeLevel:    zapcore.LowercaseLevelEncoder,
</span></span><span style="display:flex;"><span>   	EncodeTime:     zapcore.ISO8601TimeEncoder,
</span></span><span style="display:flex;"><span>   	EncodeDuration: zapcore.StringDurationEncoder,
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   core <span style="color:#555">:=</span> zapcore.<span style="color:#c0f">NewCore</span>(zapcore.<span style="color:#c0f">NewJSONEncoder</span>(encoderCfg), os.Stdout, DebugLevel)
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">return</span> <span style="color:#c0f">New</span>(core).<span style="color:#c0f">WithOptions</span>(options<span style="color:#555">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Configç»“æ„ä½“</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">type</span> Config <span style="color:#069;font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  Level AtomicLevel   <span style="color:#09f;font-style:italic">//æ—¥å¿—çº§åˆ«
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  Development <span style="color:#078;font-weight:bold">bool</span>    <span style="color:#09f;font-style:italic">//æ˜¯å¦å¼€å‘æ¨¡å¼
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  DisableCaller <span style="color:#078;font-weight:bold">bool</span>  <span style="color:#09f;font-style:italic">//æ˜¯å¦ä¸è®°å½•è°ƒç”¨è€…
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  DisableStacktrace <span style="color:#078;font-weight:bold">bool</span>  <span style="color:#09f;font-style:italic">// completely disables automatic stacktrace capturing     
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  Sampling <span style="color:#555">*</span>SamplingConfig  <span style="color:#09f;font-style:italic">//é‡‡æ ·é…ç½®ï¼Œæ—¥å¿—å¯ä»¥æŒ‰æ¯”ä¾‹ä¸¢å¼ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  Encoding <span style="color:#078;font-weight:bold">string</span>   <span style="color:#09f;font-style:italic">//æ‰“å°æ—¥å¿—çš„æ ¼å¼ï¼Œæˆ‘ä»¬ä¸Šé¢è¾“å‡ºçš„æ—¥å¿—æ˜¯jsonæ ¼å¼ï¼Œä¹Ÿå¯ä»¥ä¼ ç»ŸJavaæ—¥å¿—åº“æ‰“å°çš„æ‰å¹³æ–‡æœ¬æ ¼å¼
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  EncoderConfig zapcore.EncoderConfig <span style="color:#09f;font-style:italic">//é…ç½®è¾“å‡ºJSONæ ¼å¼æ—¥å¿— å­—æ®µåç§° 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  OutputPaths []<span style="color:#078;font-weight:bold">string</span>   <span style="color:#09f;font-style:italic">//è¾“å‡ºæ—¥å¿—æ–‡ä»¶è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  ErrorOutputPaths []<span style="color:#078;font-weight:bold">string</span>  <span style="color:#09f;font-style:italic">//zapå†…éƒ¨çš„é”™è¯¯è¾“å‡ºè·¯å¾„ï¼Œé»˜è®¤æ˜¯æ ‡å‡†è¾“å‡ºsysout
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  InitialFields <span style="color:#069;font-weight:bold">map</span>[<span style="color:#078;font-weight:bold">string</span>]<span style="color:#069;font-weight:bold">interface</span>{}  <span style="color:#09f;font-style:italic">//root loggerå­—æ®µ
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span></code></pre></div><p>å†çœ‹çœ‹EncoderConfigç»“æ„ä½“,å¤§éƒ¨åˆ†å­—æ®µæ ¹æ®åå­—èƒ½çŒœåˆ°ç”¨é€”ï¼Œæˆ‘å°±ä¸åŠ è¯¦ç»†æ³¨é‡Šäº†</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">type</span> EncoderConfig <span style="color:#069;font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#09f;font-style:italic">// Set the keys used for each log entry. If any key is empty, that portion
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   <span style="color:#09f;font-style:italic">// of the entry is omitted.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   MessageKey     <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;messageKey&#34; yaml:&#34;messageKey&#34;`</span>
</span></span><span style="display:flex;"><span>   LevelKey       <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;levelKey&#34; yaml:&#34;levelKey&#34;`</span>
</span></span><span style="display:flex;"><span>   TimeKey        <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;timeKey&#34; yaml:&#34;timeKey&#34;`</span>
</span></span><span style="display:flex;"><span>   NameKey        <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;nameKey&#34; yaml:&#34;nameKey&#34;`</span>
</span></span><span style="display:flex;"><span>   CallerKey      <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;callerKey&#34; yaml:&#34;callerKey&#34;`</span>
</span></span><span style="display:flex;"><span>   FunctionKey    <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;functionKey&#34; yaml:&#34;functionKey&#34;`</span>
</span></span><span style="display:flex;"><span>   StacktraceKey  <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;stacktraceKey&#34; yaml:&#34;stacktraceKey&#34;`</span>
</span></span><span style="display:flex;"><span>   SkipLineEnding <span style="color:#078;font-weight:bold">bool</span>   <span style="color:#c30">`json:&#34;skipLineEnding&#34; yaml:&#34;skipLineEnding&#34;`</span>
</span></span><span style="display:flex;"><span>   LineEnding     <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;lineEnding&#34; yaml:&#34;lineEnding&#34;`</span>
</span></span><span style="display:flex;"><span>   <span style="color:#09f;font-style:italic">// Configure the primitive representations of common complex types. For
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   <span style="color:#09f;font-style:italic">// example, some users may want all time.Times serialized as floating-point
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   <span style="color:#09f;font-style:italic">// seconds since epoch, while others may prefer ISO8601 strings.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   EncodeLevel    LevelEncoder    <span style="color:#c30">`json:&#34;levelEncoder&#34; yaml:&#34;levelEncoder&#34;`</span>
</span></span><span style="display:flex;"><span>   EncodeTime     TimeEncoder     <span style="color:#c30">`json:&#34;timeEncoder&#34; yaml:&#34;timeEncoder&#34;`</span>
</span></span><span style="display:flex;"><span>   EncodeDuration DurationEncoder <span style="color:#c30">`json:&#34;durationEncoder&#34; yaml:&#34;durationEncoder&#34;`</span>
</span></span><span style="display:flex;"><span>   EncodeCaller   CallerEncoder   <span style="color:#c30">`json:&#34;callerEncoder&#34; yaml:&#34;callerEncoder&#34;`</span>
</span></span><span style="display:flex;"><span>   <span style="color:#09f;font-style:italic">// Unlike the other primitive type encoders, EncodeName is optional. The
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   <span style="color:#09f;font-style:italic">// zero value falls back to FullNameEncoder.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   EncodeName NameEncoder <span style="color:#c30">`json:&#34;nameEncoder&#34; yaml:&#34;nameEncoder&#34;`</span>
</span></span><span style="display:flex;"><span>   <span style="color:#09f;font-style:italic">// Configure the encoder for interface{} type objects.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   <span style="color:#09f;font-style:italic">// If not provided, objects are encoded using json.Encoder
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   NewReflectedEncoder <span style="color:#069;font-weight:bold">func</span>(io.Writer) ReflectedEncoder <span style="color:#c30">`json:&#34;-&#34; yaml:&#34;-&#34;`</span>
</span></span><span style="display:flex;"><span>   <span style="color:#09f;font-style:italic">// Configures the field separator used by the console encoder. Defaults
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   <span style="color:#09f;font-style:italic">// to tab.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   ConsoleSeparator <span style="color:#078;font-weight:bold">string</span> <span style="color:#c30">`json:&#34;consoleSeparator&#34; yaml:&#34;consoleSeparator&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å…«  zapæ—¥å¿—çš„æ ¸å¿ƒé…ç½®
ä»Exampleä¾‹å­å¯ä»¥çœ‹åˆ°zapcore.NewCore()ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸º</p>
<ul>
<li><code>Encoder</code>  ç¼–ç </li>
<li><code>WriteSyncer</code>   è¾“å‡ºç›®çš„</li>
<li><code>LevelEnabler</code>  æ—¥å¿—è®°å½•çº§åˆ«</li>
</ul>
<p>ä¹  æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶é…ç½®</p>
<p>ä»â€œå…« zapçš„æ—¥å¿—æ ¸å¿ƒé…ç½®â€ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯ä»¥çœ‹åˆ°ï¼Œæ—¥å¿—è¾“å‡ºé…ç½®ä¸ºNewCoreçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå‚æ•°ç±»å‹å®šä¹‰å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">type</span> WriteSyncer <span style="color:#069;font-weight:bold">interface</span> {
</span></span><span style="display:flex;"><span>	io.Writer
</span></span><span style="display:flex;"><span>	<span style="color:#c0f">Sync</span>() <span style="color:#078;font-weight:bold">error</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åŒæ—¶æä¾›ä¸€ä¸ªAddSyncå‡½æ•°ï¼Œæä¾›ä»io.Writeråˆ°WriterSyncerè½¬æ¢</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">func</span> <span style="color:#c0f">AddSync</span>(w io.Writer) WriteSyncer{
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">switch</span> w <span style="color:#555">:=</span> w.(<span style="color:#069;font-weight:bold">type</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#069;font-weight:bold">case</span> WriteSyncer:
</span></span><span style="display:flex;"><span>			<span style="color:#069;font-weight:bold">return</span> w
</span></span><span style="display:flex;"><span>		<span style="color:#069;font-weight:bold">default</span>:
</span></span><span style="display:flex;"><span>			<span style="color:#069;font-weight:bold">return</span> writerWrapper{w}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤è¡Œä»£ç åˆ›å»ºä¸€ä¸ªå†™æ—¥å¿—åˆ°æ–‡ä»¶çš„WriterSyncer</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>file, _ <span style="color:#555">:=</span> os.<span style="color:#c0f">Create</span>(<span style="color:#c30">&#34;./test.log&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> zapcore.<span style="color:#c0f">AddSync</span>(file)
</span></span></code></pre></div><p>å zapæ—¥å¿—æ–‡ä»¶åˆ‡åˆ†
ä½œä¸ºå¤šå¹´çš„Javaå¼€å‘ç»éªŒï¼Œç¬¬ä¸€æ¬¡çœ‹åˆ°zapåº“å°½ç„¶æ²¡è‡ªå¸¦æ—¥å¿—æ–‡ä»¶åˆ‡åˆ†åŠŸèƒ½ï¼Œè¿™ä¸ªåŸºç¡€åŠŸèƒ½ç«Ÿç„¶æ²¡æä¾›ï¼Œè¿˜æ˜¯å¤§åƒä¸€æƒŠ(ğŸ˜±ğŸ˜±)ï¼Œéœ€è¦å†æ•´åˆå…¶å¥¹ç¬¬ä¸‰æ–¹åŒ…ï¼ŒæŒ‰ç…§zapçš„FAQæ–‡æ¡£æ¨èçš„ç”¨lumberjackåº“åšæ—¥å¿—åˆ‡åˆ†ï¼Œå¥½å®¶ä¼™ï¼Œé‚£æˆ‘ä»¬å°±é€‰ç”¨lumberjack</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>go get -u  github.com/natefinch/lumberjack v0.0.0-20230119042236-215739b3bcdc
</span></span></code></pre></div><p>æ¯”å¦‚goè¯­è¨€<strong>æ ‡å‡†åº“è‡ªå¸¦log</strong>è®¾ç½®è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶ï¼Œå¹¶åˆ‡åˆ†ï¼Œé…ç½®å¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>hook <span style="color:#555">:=</span> lumberjack.Logger{
</span></span><span style="display:flex;"><span>		Filename:   <span style="color:#c30">&#34;./logs/applog&#34;</span> <span style="color:#555">+</span> <span style="color:#c30">&#34;.log&#34;</span>,
</span></span><span style="display:flex;"><span>		MaxSize:    <span style="color:#f60">1</span>,    <span style="color:#09f;font-style:italic">//æ—¥å¿—æœ€å¤§çš„å¤§å°ï¼ˆMï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		MaxBackups: <span style="color:#f60">10</span>,   <span style="color:#09f;font-style:italic">//å¤‡ä»½ä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		MaxAge:     <span style="color:#f60">7</span>,    <span style="color:#09f;font-style:italic">//æœ€å¤§ä¿å­˜å¤©æ•°ï¼ˆdayï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		Compress:   <span style="color:#069;font-weight:bold">true</span>, <span style="color:#09f;font-style:italic">//æ˜¯å¦å‹ç¼©
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		LocalTime:  <span style="color:#069;font-weight:bold">false</span>,
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	log.<span style="color:#c0f">SetOutput</span>(<span style="color:#555">&amp;</span>hook)
</span></span></code></pre></div><p>åˆ›å»ºzapcoreçš„WriteSyncerå¯¹è±¡ï¼Œæ”¯æŒæ—¥å¿—æ–‡ä»¶æ‹†åˆ†</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// ä½¿ç”¨lumberjackå®ç°æ—¥å¿—åˆ‡å‰²
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">func</span> <span style="color:#c0f">getRorateWritter</span>() zapcore.WriteSyncer {
</span></span><span style="display:flex;"><span>	hook <span style="color:#555">:=</span> lumberjack.Logger{
</span></span><span style="display:flex;"><span>		Filename:   <span style="color:#c30">&#34;./logs/app_rotate_log&#34;</span> <span style="color:#555">+</span> <span style="color:#c30">&#34;.log&#34;</span>,
</span></span><span style="display:flex;"><span>		MaxSize:    <span style="color:#f60">1</span>,    <span style="color:#09f;font-style:italic">//æ—¥å¿—æœ€å¤§çš„å¤§å°ï¼ˆMï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		MaxBackups: <span style="color:#f60">10</span>,   <span style="color:#09f;font-style:italic">//å¤‡ä»½ä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		MaxAge:     <span style="color:#f60">7</span>,    <span style="color:#09f;font-style:italic">//æœ€å¤§ä¿å­˜å¤©æ•°ï¼ˆdayï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		Compress:   <span style="color:#069;font-weight:bold">true</span>, <span style="color:#09f;font-style:italic">//æ˜¯å¦å‹ç¼©
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		LocalTime:  <span style="color:#069;font-weight:bold">false</span>,
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">return</span> zapcore.<span style="color:#c0f">AddSync</span>(<span style="color:#555">&amp;</span>hook)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åˆ›å»ºå¸¦æ—¥å¿—åˆ‡åˆ†åŠŸèƒ½çš„zap logger</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>	rorateWritter <span style="color:#555">:=</span> <span style="color:#c0f">getRorateWritter</span>()
</span></span><span style="display:flex;"><span>	encoder <span style="color:#555">:=</span> <span style="color:#c0f">getEncoder</span>()
</span></span><span style="display:flex;"><span>	core <span style="color:#555">:=</span> zapcore.<span style="color:#c0f">NewCore</span>(encoder, rorateWritter, zapcore.DebugLevel)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	logger = zap.<span style="color:#c0f">New</span>(core, zap.<span style="color:#c0f">AddCaller</span>())
</span></span></code></pre></div>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/go/" rel="tag">go</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/loggin/" rel="tag">loggin</a>
		</li>
	</ul>
</div>
		</footer>
           <script
  type="application/javascript"
  src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"
></script>
<script>
  var config = {
    startOnLoad: true,
    theme:'dark',
    align:'center',
  };
  mermaid.initialize(config);
</script>
	</article>
</main>




			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/posts/go-log-zap/">Goè¯­è¨€é«˜æ€§èƒ½æ—¥å¿—åº“-zapä»‹ç»</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/etcd-action-part-2/">etcdé›†ç¾¤è‡ªåŠ¨åŒ–éƒ¨ç½²</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/etcd-action-part-1/">etcdè®¾ç½®TLSè¯ä¹¦</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/service-mesh-consul-part-4/">consulå®æˆ˜ç³»åˆ—-ä¹‹å›› åŸºäºConsulå’ŒEnvoyæ­å»ºæœåŠ¡ç½‘æ ¼</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/service-mesh-consul-part-3/">consulå®æˆ˜ç³»åˆ—-ä¹‹ä¸‰ ConsulæœåŠ¡å™¨æ­å»ºï¼Œå®ç°åŠ å¯†é€šä¿¡å’Œè®¤è¯è®¿é—®</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/service-mesh-consul-part-2/">consulå®æˆ˜ç³»åˆ—-ä¹‹äºŒ ConsulæœåŠ¡æ³¨å†Œå’Œå‘ç°åŠŸèƒ½</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/service-mesh-consul-part-1/">consulå®æˆ˜ç³»åˆ—-ä¹‹ä¸€ consulä»‹ç»å’Œåˆä½“éªŒ</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/my-first-post/">æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢æ–‡ç« </a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/about/">å…³äº</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item">
				<a class="widget__link" href="/categories/etcd/">etcd</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/go/">go</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%E5%85%B3%E4%BA%8E/">å…³äº</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%E5%86%99%E4%BD%9C/">å†™ä½œ</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC/">æœåŠ¡ç½‘æ ¼</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/consul/" title="Consul">Consul</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/etcd/" title="etcd">etcd</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/go/" title="go">go</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/hugo/" title="Hugo">Hugo</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/loggin/" title="loggin">loggin</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/microservice/" title="MicroService">MicroService</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/servicemesh/" title="ServiceMesh">ServiceMesh</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/springcloud/" title="SpringCloud">SpringCloud</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/tls/" title="TLS">TLS</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%E5%85%B3%E4%BA%8E/" title="å…³äº">å…³äº</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/%E5%86%99%E4%BD%9C%E5%B9%B3%E5%8F%B0/" title="å†™ä½œå¹³å°">å†™ä½œå¹³å°</a>
	</div>
</div>
<div class="widget-social widget">
	<h4 class="widget-social__title widget__title">Social</h4>
	<div class="widget-social__content widget__content">
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="LinkedIn" rel="noopener noreferrer" href="https://linkedin.com/in/wangrenjun" target="_blank">
				<svg class="widget-social__link-icon icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0,40v272c0,21.9,18.1,40,40,40h272c21.9,0,40-18.1,40-40V40c0-21.9-18.1-40-40-40H40C18.1,0,0,18.1,0,40z M312,32 c4.6,0,8,3.4,8,8v272c0,4.6-3.4,8-8,8H40c-4.6,0-8-3.4-8-8V40c0-4.6,3.4-8,8-8H312z M59.5,87c0,15.2,12.3,27.5,27.5,27.5 c15.2,0,27.5-12.3,27.5-27.5c0-15.2-12.3-27.5-27.5-27.5C71.8,59.5,59.5,71.8,59.5,87z M187,157h-1v-21h-45v152h47v-75 c0-19.8,3.9-39,28.5-39c24.2,0,24.5,22.4,24.5,40v74h47v-83.5c0-40.9-8.7-72-56.5-72C208.5,132.5,193.3,145.1,187,157z M64,288h47.5 V136H64V288z"/></svg>
				<span>LinkedIn</span>
			</a>
		</div>
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="GitHub" rel="noopener noreferrer" href="https://github.com/AarenWang" target="_blank">
				<svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0c-106.1 0-192 85.8-192 191.7 0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2 0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8 0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7 0 0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4 0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5 0 25.6-.2 46.3-.2 52.6 0 5.1 3.5 11.1 13.2 9.2 76.2-25.5 131.2-97.3 131.2-182 0-105.9-86-191.7-192-191.7z"/></svg>
				<span>GitHub</span>
			</a>
		</div>

		
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 Aaron Wangçš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>